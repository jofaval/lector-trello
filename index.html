<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lector de Trello - JSON</title>
    <link rel="shortcut icon" href="./src/assets/img/favicon.png" type="image/x-icon">
    <script defer src="./index.js" type="module"></script>
    <!-- Evita el flasheo de pantalla -->
    <style>
        html
        {
            background-color: rgb(114, 114, 114);
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="./src/assets/css/theme.css">
</head>
<body>
    <div id="details">

    </div>
    <div id="content">

    </div>
    <div class="modal-container" id="modal-card" data-modal-name="modal-card">

    </div>
</body>
<script src="./src/components/card-modal.js"></script>
<script defer type="application/javascript">
    let openModal = function (div) {
        const rawJson = div.getAttribute('card');
        // console.log('rawJson', rawJson);

        let json = JSON.parse(
            JSON.parse(rawJson)
        );

        console.log('se ha abierto una tarjeta', json);

        const modalCard = document.querySelector('#modal-card');
        console.log('modalCard', modalCard);
        // Se renderiza el modal de la carta
        modalCard.innerHTML = renderCardModal(json);

        // Se muestra visible el contenedor
        modalCard?.classList?.remove('d-none')
        modalCard?.classList?.add('d-block')
        
        // Se muestra visible el modal
        const modal = modalCard?.querySelector('.modal')
        console.log('modal', modal);
        modal?.classList?.remove('d-none')
        modal?.classList?.add('d-block')

    }

    let closeCardModal = function () {
        const modal = document.querySelector('.modal')

        modal.remove();
    }

    let stopPropagation = function (evt) {
        const event = evt || window.event;

        event.preventDefault();
        event.stopPropagation();

        return false;
    }
</script>
</html>